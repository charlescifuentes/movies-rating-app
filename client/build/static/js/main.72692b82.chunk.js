(this["webpackJsonpmovie-rating-app"]=this["webpackJsonpmovie-rating-app"]||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=(a(78),a(79),a(22)),i=function(){return r.a.createElement("header",{className:"bg-color p-5 text-white text-center mb-5"},r.a.createElement("h1",{className:"mb-4"},"MOVIES RATING APP"),r.a.createElement("p",{className:"lead"},'Web Application that allow to query a Movie List from the "The Movie DB", also the user can give ratings and make comments'))},s=a(11),m=a.n(s),u=a(16),d=a(10),p=a(28),E=a(65),f=a.n(E),b=function(){return window.history.replaceState({},document.title,window.location.pathname)},h=r.a.createContext(),v=function(){return Object(n.useContext)(h)},g=a(15),w=a(125),N=a(126),x=a(127),k=function(e){return r.a.createElement(w.a,null,e.movies.map((function(t){return r.a.createElement("div",{key:t.id,className:"mb-2 border rounded shadow bg-color"},r.a.createElement(N.a,null,r.a.createElement(x.a,{md:"4"},r.a.createElement(g.a,{to:{pathname:"/movieslistdetail",state:{movieData:t,base_url:e.base_url}}},r.a.createElement("figure",{className:"img-effect"},r.a.createElement("img",{src:e.base_url+t.poster_path,width:"100%",alt:"Poster"}),r.a.createElement("figcaption",null,r.a.createElement("h3",null,"See Now"))))),r.a.createElement(x.a,{md:"8",className:"p-4 text-white"},r.a.createElement("h2",null,r.a.createElement(g.a,{to:{pathname:"/movieslistdetail",state:{movieData:t,base_url:e.base_url}}},t.title)),r.a.createElement("p",null,t.overview),r.a.createElement("div",null,r.a.createElement("h3",{className:"border border-white d-inline-block p-3"},"Release Date : ",t.release_date)),r.a.createElement("div",null,r.a.createElement("h4",{className:"border border-white d-inline-block p-3"},"Vote Average : ",t.vote_average)))))})))},O=a(19),j=a(29),y=a(128),C=a(129),S=a(130),_=a(131),D=a(67),P=function(e){var t=Object(n.useState)(e.date),a=Object(d.a)(t,2),c=a[0],l=a[1];Object(n.useEffect)((function(){l(e.date)}),[e]);return r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(y.a,{onSubmit:function(t){t.preventDefault(),e.getMovieList(c.rDate)},className:"shadow p-4 mb-2 bg-white rounded"},r.a.createElement(C.a,null,r.a.createElement(S.a,{for:"rDate"},"Selecciona un a\xf1o"),r.a.createElement(_.a,{type:"select",name:"rDate",id:"rDate",value:c.rDate,onChange:function(e){e.persist(),l(Object(j.a)({},c,Object(O.a)({},e.target.name,e.target.value)))}},r.a.createElement("option",null,"2017"),r.a.createElement("option",null,"2018"),r.a.createElement("option",null,"2019"))),r.a.createElement(D.a,{color:"info",type:"submit",size:"lg",block:!0},"Buscar")))},R=function(){var e=Object(n.useState)({rDate:"2017"}),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(d.a)(l,2),i=o[0],s=o[1],p=Object(n.useState)(!1),E=Object(d.a)(p,2),f=E[0],b=E[1],h=v().isAuthenticated,g=function(){var e=Object(u.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch("https://api.themoviedb.org/3/discover/movie?api_key=22555534f5b29022b079b339a0388c07&language=en-US&sort_by=release_date.asc&include_adult=false&include_video=false&page=1&primary_release_year=".concat(t)).then((function(e){return e.json()})).then((function(e){s(e.results),c(t),b(!0)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h?r.a.createElement(w.a,null,r.a.createElement("div",{className:"text-center text-white bg-color shadow p-3 mb-3 rounded"},r.a.createElement("h2",null,"LIST OF MOVIES BY YEAR")),r.a.createElement(P,{date:a,getMovieList:g}),f&&r.a.createElement(k,{movies:i,base_url:"https://image.tmdb.org/t/p/w500/"})):r.a.createElement(w.a,null,r.a.createElement("div",{className:"text-center text-white bg-color shadow p-3 mb-3 rounded"},r.a.createElement("h2",null,"Please Login to see All the Movies List")))},L=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(i,null),r.a.createElement(R,null))},A=function(){var e=v(),t=e.loading,a=e.user;return t||!a?r.a.createElement("div",null,"Loading..."):r.a.createElement(w.a,{className:"p-5"},r.a.createElement(N.a,null,r.a.createElement(x.a,{md:"4"},r.a.createElement("img",{src:a.picture,alt:"Profile"})),r.a.createElement(x.a,{md:"8"},r.a.createElement("h2",null,a.name),r.a.createElement("p",null,a.email))),r.a.createElement("div",{className:"mt-3 p-3 bg-dark text-white"},r.a.createElement("code",null,JSON.stringify(a,null,2))))},I=a(12),T=Object(I.a)(),B=function(e){var t=e.component,a=e.path,c=Object(p.a)(e,["component","path"]),l=v(),i=l.loading,s=l.isAuthenticated,d=l.loginWithRedirect;Object(n.useEffect)((function(){i||s||function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({appState:{targetUrl:a}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[i,s,d,a]);return r.a.createElement(o.a,Object.assign({path:a,render:function(e){return!0===s?r.a.createElement(t,e):null}},c))},W=a(68),M=a.n(W),U=function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("img",{src:M.a,alt:"Loading"}))},V=a(23),q=a(132),G=a(133),J=a(134),z=a(135),H=a(136),Y=a(137),F=a(138),K=a(140),Q=a(141),$=a(142),X=a(139),Z=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],c=t[1],l=v(),o=l.user,i=l.isAuthenticated,s=l.loginWithRedirect,m=l.logout,u=function(){return m({returnTo:window.location.origin})};return r.a.createElement("div",{className:"nav-container"},r.a.createElement(q.a,{color:"info",dark:!0,expand:"md"},r.a.createElement(w.a,null,r.a.createElement(G.a,null,r.a.createElement(J.a,{tag:g.b,to:"/",exact:!0,activeClassName:"router-link-exact-active"},"MOVIE RATING APP")),r.a.createElement(z.a,{onClick:function(){return c(!a)}}),r.a.createElement(H.a,{isOpen:a,navbar:!0},r.a.createElement(Y.a,{className:"mr-auto",navbar:!0},r.a.createElement(F.a,null,r.a.createElement(J.a,{tag:g.b,to:"/",exact:!0,activeClassName:"router-link-exact-active"},"Home")),i&&r.a.createElement(F.a,null,r.a.createElement(J.a,{tag:g.b,to:"/profile",exact:!0,activeClassName:"router-link-exact-active"},"Profile"))),r.a.createElement(Y.a,{className:"d-none d-md-block",navbar:!0},!i&&r.a.createElement(F.a,null,r.a.createElement(D.a,{id:"qsLoginBtn",color:"warning",className:"btn-margin",onClick:function(){return s({})}},"Log in")),i&&r.a.createElement(K.a,{nav:!0,inNavbar:!0},r.a.createElement(Q.a,{nav:!0,caret:!0,id:"profileDropDown"},r.a.createElement("img",{src:o.picture,alt:"Profile",className:"nav-user-profile rounded-circle",width:"50"})),r.a.createElement($.a,null,r.a.createElement(X.a,{header:!0},o.name),r.a.createElement(X.a,{tag:g.b,to:"/profile",className:"dropdown-profile",activeClassName:"router-link-exact-active"},r.a.createElement(V.a,{icon:"user",className:"mr-3"})," Profile"),r.a.createElement(X.a,{id:"qsLogoutBtn",onClick:function(){return u()}},r.a.createElement(V.a,{icon:"power-off",className:"mr-3"})," Log out")))),!i&&r.a.createElement(Y.a,{className:"d-md-none",navbar:!0},r.a.createElement(F.a,null,r.a.createElement(D.a,{id:"qsLoginBtn",color:"warning",block:!0,onClick:function(){return s({})}},"Log in"))),i&&r.a.createElement(Y.a,{className:"d-md-none justify-content-between",navbar:!0,style:{minHeight:170}},r.a.createElement(F.a,null,r.a.createElement("span",{className:"user-info"},r.a.createElement("img",{src:o.picture,alt:"Profile",className:"nav-user-profile d-inline-block rounded-circle mr-3",width:"50"}),r.a.createElement("h6",{className:"d-inline-block"},o.name))),r.a.createElement(F.a,null,r.a.createElement(V.a,{icon:"user",className:"mr-3"}),r.a.createElement(g.b,{to:"/profile",activeClassName:"router-link-exact-active"},"Profile")),r.a.createElement(F.a,null,r.a.createElement(V.a,{icon:"power-off",className:"mr-3"}),r.a.createElement(g.b,{to:"#",id:"qsLogoutBtn",onClick:function(){return u()}},"Log out")))))))},ee=function(){return r.a.createElement("footer",{className:"bg-color p-3 mt-5 text-center text-white"},"Movies Rating App By ",r.a.createElement("small",null,"Charles Developer"))},te=a(72),ae=a(41),ne=a.n(ae),re=a(71),ce=a.n(re),le=a(42),oe=function(e){var t=e.location.state,a=t.movieData,c=t.base_url,l=v().user,o=Object(n.useState)(""),i=Object(d.a)(o,2),s=i[0],p=i[1],E=Object(n.useState)({autor:"",comment:""}),f=Object(d.a)(E,2),b=f[0],h=f[1],g=Object(n.useState)([]),k=Object(d.a)(g,2),P=k[0],R=k[1];Object(n.useEffect)((function(){L()}),[e]);var L=function(){var e=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.a.get("/api/comments").then((function(e){console.log(e.data),R(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(w.a,{className:"py-5"},r.a.createElement("div",{className:"text-center text-white text-uppercase bg-color shadow p-3 mb-3 rounded"},r.a.createElement("h2",null,a.title)),r.a.createElement("div",{className:"mb-2 p-5 border rounded shadow bg-color"},r.a.createElement(N.a,null,r.a.createElement(x.a,{md:"4"},r.a.createElement("img",{src:c+a.poster_path,width:"100%",alt:"Poster",className:"img-thumbnail"})),r.a.createElement(x.a,{md:"8",className:"text-white"},r.a.createElement("p",{style:{fontSize:"20px"},className:"text-justify"},a.overview),r.a.createElement("div",{className:"my-2"},r.a.createElement("h3",{className:"border border-white d-inline-block p-3"},"Release Date : ",a.release_date)),r.a.createElement("div",{className:"my-2"},r.a.createElement("h4",{className:"border border-white d-inline-block p-3"},"Vote Average : ",a.vote_average)),r.a.createElement("div",{className:"my-2"},r.a.createElement("h4",{className:"border border-white d-inline-block p-3"},"Give your Rating:",r.a.createElement(ce.a,{count:5,onChange:function(e){console.log(e),p(e)},size:24,color2:"#ffd700"}),r.a.createElement("small",null,"Your Current Rating: ",s))))),r.a.createElement(N.a,{className:"mb-5 bg-info mt-4 p-3"},r.a.createElement(x.a,{md:"6"},r.a.createElement("div",{className:"text-white mb-3"},r.a.createElement("h3",null,"Insert a Comment:"),r.a.createElement(y.a,{onSubmit:function(e){var t={user:l.nickname,comment:b.comment};e.preventDefault(),ne.a.post("/api/comments",{user:t.user,comment:t.comment}).then((function(e){console.log(e.data.data),R([].concat(Object(te.a)(P),[t]))})).catch((function(e){console.log(e)})),b.comment=""}},r.a.createElement(C.a,null,r.a.createElement(S.a,null,"Inser a Comment"),r.a.createElement(_.a,{type:"textarea",name:"comment",id:"comment",value:b.comment,onChange:function(e){e.persist(),h(Object(j.a)({},b,Object(O.a)({},e.target.name,e.target.value)))}})),r.a.createElement(D.a,{type:"submit",className:"float-right",color:"warning"},"Comentar")))),r.a.createElement(x.a,{md:"6"},r.a.createElement("div",{className:"text-white"},r.a.createElement("ul",{className:"list-unstyled"},P.length>0?P.map((function(e,t){return r.a.createElement("li",{key:t,className:"border-bottom border-white mt-3"},r.a.createElement("p",null,r.a.createElement(V.a,{icon:le.b})," ",e.user),r.a.createElement("p",{className:"ml-4"},r.a.createElement(V.a,{icon:le.a})," ",e.comment))})):r.a.createElement("p",null,"There is no Comments")))))))},ie=(a(123),function(){return v().loading?r.a.createElement(U,null):r.a.createElement(o.b,{history:T},r.a.createElement("div",{className:"App d-flex flex-column h-100"},r.a.createElement(Z,null),r.a.createElement(o.c,null,r.a.createElement(o.a,{path:"/",exact:!0,component:L}),r.a.createElement(B,{path:"/profile",component:A}),r.a.createElement(o.a,{path:"/movieslistdetail",component:oe})),r.a.createElement(ee,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=a(43);l.a.render(r.a.createElement((function(e){var t=e.children,a=e.onRedirectCallback,c=void 0===a?b:a,l=Object(p.a)(e,["children","onRedirectCallback"]),o=Object(n.useState)(),i=Object(d.a)(o,2),s=i[0],E=i[1],v=Object(n.useState)(),g=Object(d.a)(v,2),w=g[0],N=g[1],x=Object(n.useState)(),k=Object(d.a)(x,2),O=k[0],j=k[1],y=Object(n.useState)(!0),C=Object(d.a)(y,2),S=C[0],_=C[1],D=Object(n.useState)(!1),P=Object(d.a)(D,2),R=P[0],L=P[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(m.a.mark((function e(){var t,a,n,r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f()(l);case 2:if(t=e.sent,j(t),!window.location.search.includes("code=")||!window.location.search.includes("state=")){e.next=10;break}return e.next=7,t.handleRedirectCallback();case 7:a=e.sent,n=a.appState,c(n);case 10:return e.next=12,t.isAuthenticated();case 12:if(r=e.sent,E(r),!r){e.next=19;break}return e.next=17,t.getUser();case 17:o=e.sent,N(o);case 19:_(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var A=function(){var e=Object(u.a)(m.a.mark((function e(){var t,a,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},L(!0),e.prev=2,e.next=5,O.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,L(!1),e.finish(10);case 13:return e.next=15,O.getUser();case 15:a=e.sent,N(a),E(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,O.handleRedirectCallback();case 3:return e.next=5,O.getUser();case 5:t=e.sent,_(!1),E(!0),N(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{isAuthenticated:s,user:w,loading:S,popupOpen:R,loginWithPopup:A,handleRedirectCallback:I,getIdTokenClaims:function(){return O.getIdTokenClaims.apply(O,arguments)},loginWithRedirect:function(){return O.loginWithRedirect.apply(O,arguments)},getTokenSilently:function(){return O.getTokenSilently.apply(O,arguments)},getTokenWithPopup:function(){return O.getTokenWithPopup.apply(O,arguments)},logout:function(){return O.logout.apply(O,arguments)}}},t)}),{domain:se.domain,client_id:se.clientId,redirect_uri:window.location.origin,onRedirectCallBack:function(e){T.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}},r.a.createElement(ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},43:function(e){e.exports=JSON.parse('{"domain":"charlesdeveloper.auth0.com","clientId":"DIk3ChVDGHGdiL1DuKekU11v7juEQCgC"}')},68:function(e,t,a){e.exports=a.p+"static/media/loading.4184a2a4.svg"},73:function(e,t,a){e.exports=a(124)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.72692b82.chunk.js.map